<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìƒí’ˆ í˜ì´ì§€ ìƒì„±ê¸° (V6.0)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css">
    <style>
        body { font-family: Pretendard, sans-serif; background-color: #f3f4f6; }
        .input-label { display: block; font-size: 0.9rem; font-weight: 700; color: #374151; margin-bottom: 5px; }
        .input-field { width: 100%; padding: 10px; border: 1px solid #d1d5db; border-radius: 8px; margin-bottom: 15px; }
        .section-box { background: white; padding: 25px; border-radius: 15px; margin-bottom: 20px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
    </style>
</head>
<body class="p-4 md:p-10 max-w-5xl mx-auto">

    <header class="mb-10 text-center">
        <h1 class="text-3xl font-bold text-[#2A4700]">ğŸ› ï¸ ìƒí’ˆ í˜ì´ì§€ ìƒì„±ê¸° V6.0</h1>
        <p class="text-gray-500 mt-2">ìŠ¤í¬ë¦½íŠ¸ ì¶©ëŒ ë°©ì§€ ë¡œì§ ì ìš© ì™„ë£Œ.</p>
    </header>

    <div class="section-box">
        <h2 class="text-xl font-bold mb-4 border-b pb-2">1. ê¸°ë³¸ ì •ë³´</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
                <label class="input-label">ìƒí’ˆ ì œëª©</label>
                <input type="text" id="p_title" class="input-field" value="ë‚˜ì˜¤ì‹œë§ˆ ë¯¸ì‹ ì›Œí‚¹íˆ¬ì–´">
            </div>
            <div>
                <label class="input-label">ì„œë¸Œ ì¹´í”¼</label>
                <input type="text" id="p_sub" class="input-field" value="ì˜ˆìˆ ê³¼ ë¯¸ì‹ì´ í•¨ê»˜í•˜ëŠ” ì„¬ ì—¬í–‰">
            </div>
            <div>
                <label class="input-label">í´ë”ëª… (ì˜ë¬¸ ì†Œë¬¸ì)</label>
                <input type="text" id="p_folder" class="input-field" value="naoshima_tour">
            </div>
            <div class="grid grid-cols-2 gap-2">
                <div>
                    <label class="input-label">ì •ê°€ (ìˆ«ìë§Œ)</label>
                    <input type="number" id="p_price_org" class="input-field" value="129000">
                </div>
                <div>
                    <label class="input-label">íŒë§¤ê°€ (ìˆ«ìë§Œ)</label>
                    <input type="number" id="p_price" class="input-field" value="89000">
                </div>
            </div>
        </div>
    </div>

    <div class="section-box">
        <h2 class="text-xl font-bold mb-4 border-b pb-2">2. ì¶”ì²œ í¬ì¸íŠ¸ (3ê°€ì§€)</h2>
        <input type="text" id="rec1" class="input-field" value="ë¯¸ìˆ ê´€ë§Œ ì°ëŠ” ìˆ™ì œ ê°™ì€ ì—¬í–‰ì´ ì‹«ìœ¼ì‹  ë¶„">
        <input type="text" id="rec2" class="input-field" value="ì‘í’ˆ ë°°ê²½ ì„¤ëª…ì´ í•„ìš”í•œ ë¶„">
        <input type="text" id="rec3" class="input-field" value="ë§›ìˆëŠ” ë¡œì»¬ ì‹ì‚¬ë¥¼ ì›í•˜ì‹œëŠ” ë¶„">
    </div>

    <div class="section-box">
        <h2 class="text-xl font-bold mb-4 border-b pb-2">3. í•µì‹¬ ì°¨ë³„ì  (Kick)</h2>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
            <div class="bg-gray-50 p-3 rounded-lg">
                <input type="text" id="k1_t" class="input-field" value="í•œêµ­ì–´ í•´ì„¤">
                <textarea id="k1_d" class="input-field h-20">ì‘í’ˆì˜ ê¹Šì´ë¥¼ ë”í•´ì£¼ëŠ” ì „ë¬¸ í•´ì„¤</textarea>
            </div>
            <div class="bg-gray-50 p-3 rounded-lg">
                <input type="text" id="k2_t" class="input-field" value="ì—¬ìœ ë¡œìš´ ì¼ì •">
                <textarea id="k2_d" class="input-field h-20">ì°ê³  í„´í•˜ëŠ” ì—¬í–‰ì´ ì•„ë‹Œ íë§ ì—¬í–‰</textarea>
            </div>
            <div class="bg-gray-50 p-3 rounded-lg">
                <input type="text" id="k3_t" class="input-field" value="ë¡œì»¬ ë§›ì§‘">
                <textarea id="k3_d" class="input-field h-20">ê´€ê´‘ì§€ ì‹ë‹¹ì´ ì•„ë‹Œ ì° ë§›ì§‘ ë°©ë¬¸</textarea>
            </div>
        </div>
    </div>

    <div class="section-box">
        <div class="flex justify-between items-center mb-4 border-b pb-2">
            <h2 class="text-xl font-bold">4. ì½”ìŠ¤ íƒ€ì„ë¼ì¸</h2>
            <button onclick="addTimeline()" class="bg-gray-200 px-3 py-1 rounded text-sm font-bold hover:bg-gray-300">+ ì¶”ê°€</button>
        </div>
        <div id="timeline_area" class="space-y-4"></div>
    </div>

    <div class="section-box">
        <h2 class="text-xl font-bold mb-4 border-b pb-2">5. ê°€ì´ë“œ ë° ì•ˆë‚´</h2>
        <label class="input-label">ê°€ì´ë“œ ì†Œê°œ íƒ€ì´í‹€</label>
        <input type="text" id="g_title" class="input-field" value="ì˜ˆìˆ ì„ ì‚¬ë‘í•˜ëŠ” ì „ë¬¸ ê°€ì´ë“œ">
        <label class="input-label">ê°€ì´ë“œ ë©˜íŠ¸</label>
        <textarea id="g_desc" class="input-field h-20">ì—¬ëŸ¬ë¶„ì—ê²Œ ìŠì§€ ëª»í•  ì¶”ì–µì„ ì„ ë¬¼í•˜ê² ìŠµë‹ˆë‹¤.</textarea>
        
        <div class="grid grid-cols-2 gap-4">
            <div>
                <label class="input-label">í¬í•¨ ì‚¬í•­</label>
                <textarea id="inc" class="input-field h-20">ì™•ë³µ ìŠ¹ì„ ê¶Œ, ì…ì¥ë£Œ, ê°€ì´ë“œ</textarea>
            </div>
            <div>
                <label class="input-label">ë¶ˆí¬í•¨ ì‚¬í•­</label>
                <textarea id="exc" class="input-field h-20">ì‹ì‚¬ë¹„, ê°œì¸ ê²½ë¹„</textarea>
            </div>
        </div>
    </div>

    <div class="sticky bottom-5 z-50">
        <button onclick="makeCode()" class="w-full bg-[#2A4700] text-white py-4 rounded-xl text-xl font-bold shadow-xl hover:bg-[#1f3500] transition">
            ì½”ë“œ ìƒì„±í•˜ê¸° (í´ë¦­)
        </button>
    </div>

    <div class="section-box mt-10">
        <h2 class="text-xl font-bold mb-4">ğŸ“¤ ìƒì„± ê²°ê³¼</h2>
        <p class="mb-2 font-bold text-blue-600">A. ìƒí’ˆ í˜ì´ì§€ìš© (index.html)</p>
        <textarea id="res_html" class="input-field h-64 font-mono text-xs bg-slate-50" readonly></textarea>
        
        <p class="mb-2 font-bold text-blue-600 mt-4">B. ëª©ë¡ í˜ì´ì§€ìš© (ì¹´ë“œ)</p>
        <textarea id="res_card" class="input-field h-32 font-mono text-xs bg-slate-50" readonly></textarea>
    </div>

    <script>
        // íƒ€ì„ë¼ì¸ ì´ˆê¸°í™”
        window.onload = function() {
            addTimeline('08:12', 'ë¯¸íŒ…', 'í•­êµ¬ ì§‘ê²°', false);
            addTimeline('09:00', 'ê´€ëŒ', 'ë¹¨ê°„ í˜¸ë°•', true);
            addTimeline('12:00', 'ì ì‹¬', 'ììœ  ì‹ì‚¬', true);
        };

        function addTimeline(time='', title='', desc='', check=false) {
            const div = document.createElement('div');
            div.className = 'timeline-item border p-3 rounded-lg bg-gray-50';
            div.innerHTML = `
                <div class="flex gap-2 mb-2">
                    <input type="text" class="input-field mb-0 w-1/4 t-time" placeholder="ì‹œê°„" value="${time}">
                    <input type="text" class="input-field mb-0 w-3/4 t-title" placeholder="ì¼ì • ì œëª©" value="${title}">
                </div>
                <textarea class="input-field mb-2 h-16 t-desc" placeholder="ìƒì„¸ ë‚´ìš©">${desc}</textarea>
                <div class="flex justify-between">
                    <label class="flex items-center gap-2 text-sm cursor-pointer">
                        <input type="checkbox" class="t-check accent-[#2A4700]" ${check ? 'checked' : ''}>
                        <span>ğŸ“¸ ì´ë¯¸ì§€ ì¶”ê°€ (ìë™ ë²ˆí˜¸)</span>
                    </label>
                    <button onclick="this.closest('.timeline-item').remove()" class="text-red-500 text-sm underline">ì‚­ì œ</button>
                </div>
            `;
            document.getElementById('timeline_area').appendChild(div);
        }

        function makeCode() {
            // ì˜¤ë¥˜ ë°©ì§€ë¥¼ ìœ„í•œ íƒœê·¸ ë¶„ë¦¬ (í•µì‹¬ ìˆ˜ì • ì‚¬í•­)
            const S_OPEN = '<' + 'script' + '>';
            const S_CLOSE = '<' + '/' + 'script' + '>';

            // ë°ì´í„° ìˆ˜ì§‘
            const d = {
                title: document.getElementById('p_title').value,
                sub: document.getElementById('p_sub').value,
                folder: document.getElementById('p_folder').value,
                price_o: Number(document.getElementById('p_price_org').value).toLocaleString(),
                price: Number(document.getElementById('p_price').value).toLocaleString(),
                rec: [
                    document.getElementById('rec1').value,
                    document.getElementById('rec2').value,
                    document.getElementById('rec3').value
                ],
                kicks: [
                    { t: document.getElementById('k1_t').value, d: document.getElementById('k1_d').value },
                    { t: document.getElementById('k2_t').value, d: document.getElementById('k2_d').value },
                    { t: document.getElementById('k3_t').value, d: document.getElementById('k3_d').value }
                ],
                guide: {
                    t: document.getElementById('g_title').value,
                    d: document.getElementById('g_desc').value
                },
                check: {
                    inc: document.getElementById('inc').value.replace(/\n/g, '<br>'),
                    exc: document.getElementById('exc').value.replace(/\n/g, '<br>')
                }
            };

            // íƒ€ì„ë¼ì¸ HTML ì¡°ë¦½
            let imgIdx = 4; // 1,2,3ì€ ê³ ì • ì´ë¯¸ì§€
            const items = document.querySelectorAll('.timeline-item');
            let tlHtml = '';

            items.forEach((item, idx) => {
                const time = item.querySelector('.t-time').value;
                const title = item.querySelector('.t-title').value;
                const desc = item.querySelector('.t-desc').value.replace(/\n/g, '<br>');
                const hasImg = item.querySelector('.t-check').checked;
                const isLast = idx === items.length - 1 ? 'last-item' : '';

                // ìƒ‰ìƒ ë¡œì§
                let clr = 'bg-white border-2 border-gray-300 text-gray-900';
                if(title.includes('ë¯¸íŒ…') || title.includes('ë„ì°©')) clr = 'bg-[#141719] text-white';
                else if(title.includes('ì‹ì‚¬') || title.includes('ì¤‘ì‹')) clr = 'bg-[#FFB44D] text-white';
                else if(title.includes('ê´€ëŒ') || title.includes('íˆ¬ì–´')) clr = 'bg-[#2A4700] text-white';
                else if(title.includes('ì¢…ë£Œ')) clr = 'bg-gray-500 text-white';

                let imgCode = '';
                if(hasImg) {
                    imgCode = `<div class="rounded-xl overflow-hidden shadow-sm h-40 bg-gray-200 mt-3 mb-3"><img data-img="${imgIdx}" class="w-full h-full object-cover auto-img"></div>`;
                    imgIdx++;
                }

                tlHtml += `
                <div class="flex gap-4 mb-10 relative z-10 ${isLast}">
                    <div class="timeline-line"></div>
                    <div class="w-10 h-10 rounded-full ${clr} flex items-center justify-center text-xs font-bold shrink-0 z-10">${time}</div>
                    <div class="w-full">
                        <h3 class="font-bold text-lg text-gray-900">${title}</h3>
                        <p class="text-sm text-gray-600 mt-1 leading-relaxed mb-1">${desc}</p>
                        ${imgCode}
                    </div>
                </div>`;
            });

            // HTML ì¡°ë¦½ (ë¬¸ìì—´ ì—°ê²° ë°©ì‹ ì‚¬ìš©)
            let finalHtml = `<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>${d.title}</title>
    ${S_OPEN} src="https://cdn.tailwindcss.com">${S_CLOSE}
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css">
    <style>
        body { font-family: Pretendard, sans-serif; }
        .keep-all { word-break: keep-all; word-wrap: break-word; }
        .timeline-line { position: absolute; left: 19px; top: 10px; bottom: -20px; width: 2px; background-color: #E5E7EB; z-index: 0; }
        .last-item .timeline-line { display: none; }
        .auto-img { min-height: 50px; background-color: #E5E7EB; }
    </style>
</head>
<body class="bg-[#F2F3F5] min-h-screen flex justify-center">
    <div class="w-full max-w-[430px] bg-white min-h-screen shadow-2xl relative pb-36">
        
        <div class="relative w-full h-[500px] bg-gray-200">
            <div class="absolute top-0 left-0 w-full z-20 flex justify-between p-5 pt-6 text-white">
                <a href="../index.html" class="text-2xl drop-shadow-md">â†</a>
                <div class="flex gap-4"><button>â™¥</button><button>ğŸ”—</button></div>
            </div>
            <img data-img="1" class="w-full h-full object-cover auto-img">
            <div class="absolute bottom-0 w-full h-[300px] bg-gradient-to-t from-black/90 via-black/40 to-transparent"></div>
            <div class="absolute bottom-10 left-6 right-6 text-white">
                <span class="bg-[#2A4700] text-xs px-2 py-1 rounded border border-[#486326]">New Proposal</span>
                <h1 class="text-[28px] font-bold leading-tight mt-2">${d.title}</h1>
                <p class="text-[15px] opacity-90 mt-1">${d.sub}</p>
            </div>
        </div>

        <div class="bg-white rounded-t-[30px] -mt-6 relative z-10 px-6 pt-8 pb-6 shadow-sm">
            <div class="bg-[#F9FAFB] rounded-2xl p-5">
                <span class="text-[#2A4700] font-bold text-xs mb-2 block">ğŸ’¡ ì´ëŸ° ë¶„ë“¤ê»˜ ì¶”ì²œí•´ìš”</span>
                <ul class="text-sm text-gray-600 space-y-2">
                    <li>âœ” ${d.rec[0]}</li>
                    <li>âœ” ${d.rec[1]}</li>
                    <li>âœ” ${d.rec[2]}</li>
                </ul>
            </div>
        </div>
        <div class="h-3 bg-[#F2F3F5]"></div>

        <div class="bg-white py-10 px-6">
            <h2 class="text-[#2A4700] text-xl font-bold mb-6">ì™œ ì´ íˆ¬ì–´ì—¬ì•¼ í• ê¹Œìš”?</h2>
            <div class="flex flex-col gap-8 relative">
                <div class="absolute left-[38px] top-4 bottom-4 w-[1px] bg-gray-100"></div>
                <div class="flex items-start gap-5 relative z-10">
                    <div class="w-[76px] h-[76px] rounded-2xl bg-white border border-gray-100 shadow-sm flex items-center justify-center text-3xl z-10">POINT</div>
                    <div class="pt-1"><h3 class="font-bold text-lg mb-1">${d.kicks[0].t}</h3><p class="text-gray-500 text-sm">${d.kicks[0].d}</p></div>
                </div>
                <div class="flex items-start gap-5 relative z-10">
                    <div class="w-[76px] h-[76px] rounded-2xl bg-white border border-gray-100 shadow-sm flex items-center justify-center text-3xl z-10">POINT</div>
                    <div class="pt-1"><h3 class="font-bold text-lg mb-1">${d.kicks[1].t}</h3><p class="text-gray-500 text-sm">${d.kicks[1].d}</p></div>
                </div>
            </div>
            <div class="mt-8 rounded-2xl overflow-hidden h-48 bg-gray-200"><img data-img="2" class="w-full h-full object-cover auto-img"></div>
            <div class="mt-8"><h3 class="font-bold text-lg mb-1">ğŸ½ ${d.kicks[2].t}</h3><p class="text-gray-500 text-sm">${d.kicks[2].d}</p></div>
            <div class="mt-4 rounded-2xl overflow-hidden h-40 bg-gray-200"><img data-img="3" class="w-full h-full object-cover auto-img"></div>
        </div>
        <div class="h-3 bg-[#F2F3F5]"></div>

        <div class="bg-white py-10 px-6">
            <h2 class="text-xl font-bold mb-8">ğŸ—ºï¸ íˆ¬ì–´ ì½”ìŠ¤ ì•ˆë‚´</h2>
            <div class="relative pl-2">
                ${tlHtml}
            </div>
        </div>
        <div class="h-3 bg-[#F2F3F5]"></div>

        <div class="bg-white py-10 px-6 text-center">
            <span class="text-[#2A4700] border border-[#2A4700] px-2 py-0.5 rounded-full text-xs font-bold">HOST</span>
            <h2 class="text-xl font-bold mb-4 mt-3">${d.guide.t}</h2>
            <img data-img="${imgIdx}" class="w-[120px] h-[120px] object-cover rounded-full mx-auto mb-5 shadow-lg border-4 border-white auto-img">
            <p class="text-gray-600 text-sm leading-relaxed">${d.guide.d.replace(/\n/g, '<br>')}</p>
        </div>
        <div class="h-3 bg-[#F2F3F5]"></div>

        <div class="bg-white px-6 pb-10 pt-10">
            <div class="bg-[#F9FAFB] rounded-2xl p-5 space-y-3">
                <h3 class="font-bold mb-2">âœ… ì˜ˆì•½ ì „ í™•ì¸</h3>
                <div class="border-b pb-3"><span class="font-bold text-xs block mb-1">í¬í•¨</span><p class="text-sm">${d.check.inc}</p></div>
                <div><span class="font-bold text-xs block mb-1">ë¶ˆí¬í•¨</span><p class="text-sm">${d.check.exc}</p></div>
            </div>
        </div>

        <div class="fixed bottom-0 max-w-[430px] w-full bg-white border-t p-4 pb-8 z-50 flex justify-between items-center shadow-lg"><div class="flex flex-col"><span class="text-xs text-gray-400 line-through">${d.price_o}ì›</span><span class="font-bold text-xl text-[#2A4700]">${d.price}ì›</span></div><button onclick="alert('ì¤€ë¹„ì¤‘')" class="bg-[#2A4700] text-white font-bold py-3 px-8 rounded-xl shadow-lg">ì˜ˆì•½í•˜ê¸°</button></div>
    </div>

    ${S_OPEN}
        document.addEventListener("DOMContentLoaded",()=>{
            const images = document.querySelectorAll(".auto-img");
            const exts = ["jpg","png","jpeg","webp"];
            images.forEach(img => {
                const id = img.getAttribute("data-img");
                if(!id) return;
                let attempt = 0;
                function tryLoad() {
                    if(attempt >= exts.length) return;
                    const src = "./images/" + id + "." + exts[attempt];
                    const temp = new Image();
                    temp.src = src;
                    temp.onload = () => { img.src = src; };
                    temp.onerror = () => { attempt++; tryLoad(); };
                }
                tryLoad();
            });
        });
    ${S_CLOSE}
</body>
</html>`;

            document.getElementById('res_html').value = finalHtml;

            // ì¹´ë“œ ì½”ë“œ
            const cardHtml = `<a href="./${d.folder}/index.html" class="block group">
    <div class="bg-white border border-gray-200 rounded-2xl p-5 hover:border-blue-500 hover:shadow-md transition-all relative overflow-hidden">
        <div class="flex justify-between items-start mb-2">
            <span class="bg-blue-100 text-blue-600 text-[10px] font-bold px-2 py-1 rounded">New</span>
            <span class="text-gray-300 group-hover:text-blue-500 transition">â†—</span>
        </div>
        <h3 class="font-bold text-lg text-gray-800 mb-1 group-hover:text-blue-500">${d.title}</h3>
        <p class="text-xs text-gray-500">${d.sub}</p>
    </div>
</a>`;
            document.getElementById('res_card').value = cardHtml;
        }
    </script>
</body>
</html>